#ifndef SCOREBOARD_H
#define SCOREBOARD_H

#include "global_types.h"

typedef struct scoreboard scoreboard;

//////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////

struct scoreboard {
    uns id;
    uns64 next_ready_cycle;
    uns   service_cycle;

    uns64 reset_interval; // need to reset infrequently 
    uns64 last_reset_cycle; // need to reset infrequently 
};


//////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////

scoreboard *scoreboard_new(uns service_cycle);
uns64       scoreboard_service (scoreboard *s, uns64 in_cycle, uns service_time);
uns64       scoreboard_service_reg (scoreboard *s, uns64 in_cycle);

uns64       scoreboard_get_waitcycles (scoreboard *s, uns64 in_cycle); // estimate service start

//////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////

#endif // SCOREBOARD_H
